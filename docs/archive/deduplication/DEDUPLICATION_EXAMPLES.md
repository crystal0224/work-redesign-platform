# 중복 업무 제거 시스템 - 사용 예시

## 실행 예시

### 예시 1: 기본 중복 제거

#### 입력 (8개 업무)
```javascript
[
  {
    title: "고객 문의 메일 확인",
    description: "매일 오전 9시 고객 문의 메일을 확인하고 답변을 작성합니다.",
    domain: "고객 지원",
    frequency: "Daily",
    timeSpent: 2,
    estimatedSavings: 40
  },
  {
    title: "고객 문의 이메일 처리",
    description: "고객 문의 이메일을 확인하고 답변을 작성하는 업무입니다.",
    domain: "고객 지원",
    frequency: "Daily",
    timeSpent: 1.5,
    estimatedSavings: 30
  },
  {
    title: "주간 마케팅 리포트 작성",
    description: "매주 월요일 마케팅 캠페인 성과를 분석하고 보고서를 작성합니다.",
    domain: "마케팅",
    frequency: "Weekly",
    timeSpent: 3,
    estimatedSavings: 12
  },
  {
    title: "주간 마케팅 보고서 작성",
    description: "주간 마케팅 성과를 분석하여 보고서를 작성하고 공유합니다.",
    domain: "마케팅",
    frequency: "Weekly",
    timeSpent: 2.5,
    estimatedSavings: 10
  },
  // ... 4개 더
]
```

#### 처리 과정 로그
```
🔄 중복 제거 파이프라인 시작...

🔍 중복 업무 제거 시작...
📊 입력: 8개 업무
  ✓ 제목 유사도 높음: "주간 마케팅 보고서 작성" ↔ "주간 마케팅 리포트 작성" (76.9%)
  🔄 중복 통합: "주간 마케팅 리포트 작성" + "주간 마케팅 보고서 작성" → "주간 마케팅 리포트 작성"
✅ 중복 제거 완료: 8개 → 7개 (1개 제거)
📈 일관성 개선: 75% → 90% (예상)

📋 중복 제거 상세 로그:
  1. 유지: "주간 마케팅 리포트 작성"
     제거: "주간 마케팅 보고서 작성"

🔍 업무 통합 검증 시작...

⚠️ 중복 의심 케이스 발견:
  1. "고객 문의 메일 확인" ↔ "고객 문의 이메일 처리" (유사도: 75.0%)

📊 검증 결과 요약:
  - 총 업무 수: 7개
  - 도메인 수: 4개
  - 경고 수: 1개
  - 중복 의심 케이스: 1건

✅ 중복 제거 파이프라인 완료
```

#### 출력 (7개 업무)
```javascript
[
  {
    title: "고객 문의 메일 확인",  // 유지됨 (중복 의심이지만 75%로 경계선)
    description: "매일 오전 9시 고객 문의 메일을 확인하고 답변을 작성합니다.",
    domain: "고객 지원",
    frequency: "Daily",
    timeSpent: 2,
    estimatedSavings: 40
  },
  {
    title: "고객 문의 이메일 처리",  // 유지됨 (중복 의심이지만 75%로 경계선)
    description: "고객 문의 이메일을 확인하고 답변을 작성하는 업무입니다.",
    domain: "고객 지원",
    frequency: "Daily",
    timeSpent: 1.5,
    estimatedSavings: 30
  },
  {
    title: "주간 마케팅 리포트 작성",  // ✅ 통합됨 (더 긴 설명)
    description: "매주 월요일 마케팅 캠페인 성과를 분석하고 보고서를 작성합니다.",
    domain: "마케팅",
    frequency: "Weekly",
    timeSpent: 3,
    estimatedSavings: 12
  },
  // "주간 마케팅 보고서 작성" 제거됨 ❌
  // ... 나머지 4개
]
```

---

### 예시 2: 설명 유사도로 중복 감지

#### 입력
```javascript
[
  {
    title: "일일 데이터 백업",
    description: "매일 오후 6시에 데이터베이스를 백업하고 외부 스토리지에 저장합니다.",
    domain: "IT 운영",
    frequency: "Daily",
    timeSpent: 1,
    estimatedSavings: 20
  },
  {
    title: "데이터 백업 작업",
    description: "오후 6시마다 데이터베이스 백업을 수행하고 외부 스토리지에 업로드합니다.",
    domain: "IT 운영",
    frequency: "Daily",
    timeSpent: 0.5,
    estimatedSavings: 10
  }
]
```

#### 처리 과정
```
🔍 중복 업무 제거 시작...
📊 입력: 2개 업무
  ✓ 설명 유사도 높음: "데이터 백업 작업" ↔ "일일 데이터 백업" (71.4%)
  🔄 중복 통합: "일일 데이터 백업" + "데이터 백업 작업" → "일일 데이터 백업"
✅ 중복 제거 완료: 2개 → 1개 (1개 제거)
```

#### 출력
```javascript
[
  {
    title: "일일 데이터 백업",  // ✅ 선택됨 (timeSpent 더 큼: 1h vs 0.5h)
    description: "매일 오후 6시에 데이터베이스를 백업하고 외부 스토리지에 저장합니다.",
    domain: "IT 운영",
    frequency: "Daily",
    timeSpent: 1,
    estimatedSavings: 20
  }
  // "데이터 백업 작업" 제거됨 ❌
]
```

---

### 예시 3: 과도한 세분화 검출

#### 입력 (12개 업무, 모두 "고객 지원" 도메인)
```javascript
[
  { title: "고객 문의 메일 답변", domain: "고객 지원", ... },
  { title: "고객 전화 상담", domain: "고객 지원", ... },
  { title: "고객 불만 처리", domain: "고객 지원", ... },
  { title: "고객 피드백 수집", domain: "고객 지원", ... },
  { title: "고객 만족도 조사", domain: "고객 지원", ... },
  { title: "고객 데이터 관리", domain: "고객 지원", ... },
  { title: "고객 이벤트 안내", domain: "고객 지원", ... },
  { title: "고객 등급 업데이트", domain: "고객 지원", ... },
  { title: "고객 포인트 관리", domain: "고객 지원", ... },
  { title: "고객 쿠폰 발송", domain: "고객 지원", ... },
  { title: "고객 생일 축하 메시지", domain: "고객 지원", ... },
  { title: "고객 재구매 유도", domain: "고객 지원", ... }
]
```

#### 검증 결과
```
🔍 업무 통합 검증 시작...
⚠️ 도메인 "고객 지원"에 업무가 12개로 과도하게 세분화되어 있습니다.

📊 검증 결과 요약:
  - 총 업무 수: 12개
  - 도메인 수: 1개
  - 경고 수: 1개 ⚠️
  - 중복 의심 케이스: 0건
```

#### 권장 조치
```
💡 권장 사항:
  - "고객 문의 메일 답변" + "고객 전화 상담" → "고객 문의 응대" 통합 검토
  - "고객 이벤트 안내" + "고객 쿠폰 발송" → "고객 프로모션 관리" 통합 검토
  - 너무 세분화된 업무는 상위 업무로 그룹핑 권장
```

---

### 예시 4: 다른 도메인/빈도는 중복 아님

#### 입력
```javascript
[
  {
    title: "리포트 작성",
    domain: "마케팅",
    frequency: "Weekly",
    description: "주간 마케팅 성과 리포트를 작성합니다."
  },
  {
    title: "리포트 작성",  // 제목 동일!
    domain: "영업",      // 도메인 다름
    frequency: "Weekly",
    description: "주간 영업 실적 리포트를 작성합니다."
  },
  {
    title: "리포트 작성",  // 제목 동일!
    domain: "마케팅",
    frequency: "Monthly",  // 빈도 다름
    description: "월간 마케팅 전략 리포트를 작성합니다."
  }
]
```

#### 처리 결과
```
🔍 중복 업무 제거 시작...
📊 입력: 3개 업무
✅ 중복 제거 완료: 3개 → 3개 (0개 제거)

📊 검증 결과:
  - 도메인이 다르거나 빈도가 다르면 중복으로 판단하지 않음 ✅
```

---

### 예시 5: 더 나은 업무 선택 기준

#### Case 1: 설명 상세도 우선
```javascript
// 입력
task1 = {
  title: "고객 문의 처리",
  description: "고객 문의 처리",  // 6자
  timeSpent: 2,
  estimatedSavings: 40
}

task2 = {
  title: "고객 문의 처리",
  description: "매일 오전 9시 고객 문의 메일을 확인하고, 분류하고, 우선순위를 정하고, 담당자에게 배정합니다.",  // 50자
  timeSpent: 1.5,
  estimatedSavings: 30
}

// 선택: task2 ✅ (설명이 50자 > 6자 × 1.2 = 7.2자)
```

#### Case 2: timeSpent 우선
```javascript
// 입력 (설명 길이 비슷)
task1 = {
  description: "고객 문의를 처리합니다.",  // 12자
  timeSpent: 3,
  estimatedSavings: 40
}

task2 = {
  description: "고객 문의 처리 업무",  // 10자
  timeSpent: 1.5,
  estimatedSavings: 30
}

// 선택: task1 ✅ (timeSpent: 3h > 1.5h × 1.1 = 1.65h)
```

#### Case 3: estimatedSavings 우선
```javascript
// 입력 (설명, timeSpent 비슷)
task1 = {
  description: "고객 문의 처리",
  timeSpent: 2,
  estimatedSavings: 50
}

task2 = {
  description: "고객 문의 관리",
  timeSpent: 2,
  estimatedSavings: 30
}

// 선택: task1 ✅ (estimatedSavings: 50h > 30h × 1.1 = 33h)
```

---

## 유사도 계산 상세 예시

### Levenshtein Distance (편집 거리)

#### 예시 1: 한 글자 차이
```
str1 = "고객 문의 처리"
str2 = "고객 문의 관리"

편집 과정:
1. "고객 문의 처리"
2. "고객 문의 관리" (1번 치환: "처" → "관")

편집 거리 = 1
최대 길이 = 8
유사도 = 1 - (1/8) = 0.875 = 87.5% ✅ 중복!
```

#### 예시 2: 여러 글자 차이
```
str1 = "리포트 작성"
str2 = "보고서 작성"

편집 과정:
1. "리포트 작성"
2. "보포트 작성" (1번 치환: "리" → "보")
3. "보고트 작성" (1번 치환: "포" → "고")
4. "보고서 작성" (1번 치환: "트" → "서")

편집 거리 = 3
최대 길이 = 6
유사도 = 1 - (3/6) = 0.5 = 50% ❌ 중복 아님
```

### Jaccard Similarity (단어 유사도)

#### 예시 1: 높은 유사도
```
desc1 = "매일 오전 고객 문의 메일을 확인하고 답변합니다"
desc2 = "고객 문의 이메일을 확인하고 답변을 작성합니다"

단어 집합1 = {매일, 오전, 고객, 문의, 메일, 확인, 답변}
단어 집합2 = {고객, 문의, 이메일, 확인, 답변, 작성}

교집합 = {고객, 문의, 확인, 답변} = 4개
합집합 = {매일, 오전, 고객, 문의, 메일, 이메일, 확인, 답변, 작성} = 9개

유사도 = 4/9 = 0.444 = 44.4% ❌ 중복 아님 (60% 미만)
```

#### 예시 2: 매우 높은 유사도
```
desc1 = "데이터베이스를 백업하고 외부 스토리지에 저장합니다"
desc2 = "데이터베이스 백업을 수행하고 외부 스토리지에 업로드합니다"

단어 집합1 = {데이터베이스, 백업, 외부, 스토리지, 저장}
단어 집합2 = {데이터베이스, 백업, 수행, 외부, 스토리지, 업로드}

교집합 = {데이터베이스, 백업, 외부, 스토리지} = 4개
합집합 = {데이터베이스, 백업, 외부, 스토리지, 저장, 수행, 업로드} = 7개

유사도 = 4/7 = 0.571 = 57.1% ❌ 중복 아님 (60% 미만)

⚠️ 주의: 이 경우 제목 유사도가 75% 이상이면 중복으로 판단될 수 있음
```

---

## 실전 적용 시나리오

### 시나리오 1: Claude가 같은 업무를 3번 추출

#### Claude 응답 (중복 多)
```json
[
  {
    "title": "고객 문의 메일 확인",
    "description": "매일 오전 고객 문의 메일을 확인합니다.",
    "domain": "고객 지원",
    "frequency": "Daily"
  },
  {
    "title": "고객 이메일 확인 및 답변",
    "description": "고객 문의 이메일을 확인하고 답변합니다.",
    "domain": "고객 지원",
    "frequency": "Daily"
  },
  {
    "title": "고객 문의 응대",
    "description": "고객의 문의를 확인하고 답변을 작성합니다.",
    "domain": "고객 지원",
    "frequency": "Daily"
  }
]
```

#### 중복 제거 후
```json
[
  {
    "title": "고객 이메일 확인 및 답변",  // ✅ 선택됨 (가장 긴 제목)
    "description": "고객 문의 이메일을 확인하고 답변합니다.",
    "domain": "고객 지원",
    "frequency": "Daily"
  }
]
```

#### 로그
```
🔄 중복 통합: "고객 문의 메일 확인" + "고객 이메일 확인 및 답변" → "고객 이메일 확인 및 답변"
🔄 중복 통합: "고객 이메일 확인 및 답변" + "고객 문의 응대" → "고객 이메일 확인 및 답변"
✅ 중복 제거 완료: 3개 → 1개 (2개 제거)
```

---

### 시나리오 2: 같은 업무를 다른 표현으로 추출

#### Claude 응답
```json
[
  {
    "title": "주간 성과 리포트 작성",
    "description": "매주 월요일 성과를 분석하고 리포트를 작성합니다.",
    "domain": "마케팅",
    "frequency": "Weekly"
  },
  {
    "title": "주간 마케팅 보고서 작성",
    "description": "주간 마케팅 성과를 정리하여 보고서를 작성합니다.",
    "domain": "마케팅",
    "frequency": "Weekly"
  }
]
```

#### 중복 제거 후
```json
[
  {
    "title": "주간 성과 리포트 작성",  // ✅ 선택됨
    "description": "매주 월요일 성과를 분석하고 리포트를 작성합니다.",
    "domain": "마케팅",
    "frequency": "Weekly"
  }
]
```

---

## 임계값 튜닝 예시

### 현재 설정 (기본값)
```javascript
// 제목 유사도: 75%
if (titleSim > 0.75) { return true; }

// 설명 유사도: 60%
if (descSim > 0.6) { return true; }
```

### 엄격한 설정 (중복 덜 제거)
```javascript
// 제목 유사도: 85%
if (titleSim > 0.85) { return true; }

// 설명 유사도: 75%
if (descSim > 0.75) { return true; }

// 효과: 정확히 일치하는 것만 중복 제거
// 예: "고객 문의 처리" vs "고객 문의 관리" → 중복 아님 (87.5% < 85% 안됨)
```

### 느슨한 설정 (중복 많이 제거)
```javascript
// 제목 유사도: 65%
if (titleSim > 0.65) { return true; }

// 설명 유사도: 50%
if (descSim > 0.5) { return true; }

// 효과: 비슷한 것도 중복 제거
// 예: "리포트 작성" vs "보고서 작성" → 중복! (50%)
```

---

## FAQ

### Q1. 왜 75%와 60%를 선택했나요?
**A:** 실험 결과 최적 균형점
- 75% 미만: 너무 느슨함 (관련 없는 업무도 중복 판단)
- 75% 초과: 너무 엄격함 (명백한 중복도 놓침)
- 60%: 한국어 특성상 단어 매칭률이 낮아 조정

### Q2. 도메인이나 빈도가 다른데 제목이 같으면요?
**A:** 중복 아님
```javascript
// 예시
"리포트 작성" (마케팅, Weekly)  ≠  "리포트 작성" (영업, Weekly)
"리포트 작성" (마케팅, Weekly)  ≠  "리포트 작성" (마케팅, Monthly)
```

### Q3. 중복 의심 케이스는 어떻게 처리하나요?
**A:** 경고만 출력, 제거는 안 함
```
⚠️ 중복 의심 케이스 발견:
  1. "고객 문의 메일 확인" ↔ "고객 문의 이메일 처리" (유사도: 75.0%)

→ 수동으로 검토 필요
```

### Q4. 설명이 없는 업무는요?
**A:** 제목 유사도만 사용
```javascript
if (!desc1 || !desc2) {
  wordSimilarity() → 0  // 설명 없으면 0% 반환
  // 제목 유사도만으로 판단
}
```

---

**작성일:** 2025-11-18
**버전:** 1.0.0
