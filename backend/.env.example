# ============================================
# Work Redesign Platform - Backend Environment Variables
# ============================================
#
# 이 파일을 .env로 복사하여 사용하세요:
# cp .env.example .env
#
# 필수 변수는 반드시 설정해야 합니다!
# ============================================

# --------------------------------------------
# 서버 설정
# --------------------------------------------
NODE_ENV=development
PORT=4000

# CORS 설정 - 프론트엔드 도메인 허용
# Development: http://localhost:3000
# Production: https://your-frontend.vercel.app
CORS_ORIGIN=http://localhost:3000

# --------------------------------------------
# 데이터베이스 설정 (필수 ✅)
# --------------------------------------------
# PostgreSQL 연결 문자열
# 로컬: postgresql://user:password@localhost:5432/work_redesign
# Railway: 자동 생성됨 (DATABASE_URL 환경 변수)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/work_redesign

# Redis 연결 문자열
# 로컬: redis://localhost:6379
# Railway: 자동 생성됨 (REDIS_URL 환경 변수)
REDIS_URL=redis://localhost:6379

# --------------------------------------------
# 인증 설정 (필수 ✅)
# --------------------------------------------
# JWT Secret Key (최소 32자)
# 안전한 랜덤 문자열 생성: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# JWT 만료 시간
JWT_EXPIRES_IN=7d

# --------------------------------------------
# Anthropic Claude API (필수 ✅)
# --------------------------------------------
# Anthropic API Key
# https://console.anthropic.com/account/keys
ANTHROPIC_API_KEY=sk-ant-api-your-key-here

# 사용할 Claude 모델
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# API 최대 토큰 수
ANTHROPIC_MAX_TOKENS=8000

# --------------------------------------------
# AI 캐싱 설정 (비용 절감 50%)
# --------------------------------------------
# AI 응답 캐싱 활성화
ENABLE_AI_CACHE=true

# 캐시 TTL (초) - 기본 1시간
AI_CACHE_TTL=3600

# 캐시 키 버전 (모델/프롬프트 변경 시 증가)
AI_CACHE_VERSION=v1

# --------------------------------------------
# Rate Limiting 설정
# --------------------------------------------
# 일반 API Rate Limit (요청/분)
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=100

# AI API Rate Limit (요청/분/IP)
AI_RATE_LIMIT_WINDOW_MS=60000
AI_RATE_LIMIT_MAX_REQUESTS=10

# 사용자별 AI Rate Limit (요청/분/사용자)
USER_AI_RATE_LIMIT_MAX_REQUESTS=20

# 파일 업로드 Rate Limit (요청/15분)
FILE_UPLOAD_RATE_LIMIT_WINDOW_MS=900000
FILE_UPLOAD_RATE_LIMIT_MAX_REQUESTS=50

# --------------------------------------------
# 파일 스토리지 (선택사항)
# --------------------------------------------
# AWS S3 설정 (파일 업로드용)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=work-redesign-uploads
AWS_REGION=ap-northeast-2

# 로컬 파일 스토리지 경로
LOCAL_UPLOAD_PATH=./uploads

# 파일 업로드 제한 (MB)
MAX_FILE_SIZE_MB=10

# --------------------------------------------
# 이메일 설정 (선택사항)
# --------------------------------------------
# SMTP 설정
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# 발신자 정보
EMAIL_FROM_NAME=Work Redesign Platform
EMAIL_FROM_ADDRESS=noreply@workredesign.com

# --------------------------------------------
# 모니터링 및 로깅 (선택사항)
# --------------------------------------------
# Sentry DSN (에러 모니터링)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry 환경
SENTRY_ENVIRONMENT=development

# DataDog API Key (APM)
DATADOG_API_KEY=your-datadog-api-key

# 로그 레벨 (error, warn, info, debug)
LOG_LEVEL=info

# --------------------------------------------
# Feature Flags
# --------------------------------------------
# 기능 활성화/비활성화
ENABLE_WEBSOCKET=true
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_FILE_UPLOAD=true

# --------------------------------------------
# 보안 설정
# --------------------------------------------
# 비밀번호 해싱 라운드 수
BCRYPT_ROUNDS=10

# CSRF 보호 활성화
ENABLE_CSRF_PROTECTION=false

# --------------------------------------------
# 개발 도구
# --------------------------------------------
# API 문서 활성화 (Swagger)
ENABLE_API_DOCS=true

# 디버그 모드
DEBUG=false

# 데이터베이스 쿼리 로깅
DB_QUERY_LOGGING=false
